# üìö GraphQL –®–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ AbsoluteCinema

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ GraphQL –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏?

**GraphQL** ‚Äî —ç—Ç–æ —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è API –∏ —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

### –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–æ–≥–∏—è:
- **REST API** = –º–µ–Ω—é –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ: –≤—ã –∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç–µ –≥–æ—Ç–æ–≤–æ–µ –±–ª—é–¥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–±–æ—Ä—â"), –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –≤—Å—ë, —á—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ –±–ª—é–¥–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ —Å–º–µ—Ç–∞–Ω–∞
- **GraphQL** = —à–≤–µ–¥—Å–∫–∏–π —Å—Ç–æ–ª: –≤—ã —Å–∞–º–∏ –≤—ã–±–∏—Ä–∞–µ—Ç–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞–º –Ω—É–∂–Ω–æ, –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ —Ç–æ–ª—å–∫–æ —ç—Ç–æ

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
1. **–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—à—å —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ** ‚Äî –Ω–µ –ø–æ–ª—É—á–∞–µ—à—å –ª–∏—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–û–¥–∏–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç** ‚Äî –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ REST endpoints (`/api/movies`, `/api/movies/1`, `/api/movies/1/actors`) –æ–¥–∏–Ω `/graphql`
3. **–°–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** ‚Äî —Å–µ—Ä–≤–µ—Ä —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å
4. **–ò–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—è** ‚Äî –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã (–∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ IDE)

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è:
- **Query (–ó–∞–ø—Ä–æ—Å)** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∞–Ω–∞–ª–æ–≥ GET –≤ REST)
- **Mutation (–ú—É—Ç–∞—Ü–∏—è)** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∞–Ω–∞–ª–æ–≥ POST/PUT/DELETE –≤ REST)
- **Subscription (–ü–æ–¥–ø–∏—Å–∫–∞)** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (WebSocket)
- **Schema (–°—Ö–µ–º–∞)** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- **Type (–¢–∏–ø)** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ GraphQL –≤ –ø—Ä–æ–µ–∫—Ç–µ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ         ‚îÇ   GraphQL        ‚îÇ         ‚îÇ   Backend       ‚îÇ
‚îÇ   (React)       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Server         ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   (C# .NET)     ‚îÇ
‚îÇ   Apollo Client ‚îÇ         ‚îÇ   (HotChocolate) ‚îÇ         ‚îÇ   Services      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
1. React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç GraphQL –∑–∞–ø—Ä–æ—Å
2. Apollo Client –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ `/graphql` endpoint
3. HotChocolate –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
4. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π resolver (–º–µ—Ç–æ–¥ –≤ Query –∫–ª–∞—Å—Å–µ)
5. Resolver –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î
6. –î–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –∑–∞–ø—Ä–æ—Å–∏–ª

---

## üîß Backend: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç GraphQL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **HotChocolate** ‚Äî GraphQL —Å–µ—Ä–≤–µ—Ä –¥–ª—è .NET
- **HotChocolate.Data** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –ø—Ä–æ–µ–∫—Ü–∏–π
- **HotChocolate.Types** ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è GraphQL —Å—Ö–µ–º—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:

```
AbsoluteCinema.WebAPI/
‚îú‚îÄ‚îÄ GraphQL/
‚îÇ   ‚îú‚îÄ‚îÄ GraphQLSchema.cs          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GraphQL —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ Queries/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MovieQuery.cs         # –ó–∞–ø—Ä–æ—Å—ã (Query)
‚îÇ   ‚îú‚îÄ‚îÄ Mutations/                # –ú—É—Ç–∞—Ü–∏–∏ (–ø–æ–∫–∞ –ø—É—Å—Ç–æ)
‚îÇ   ‚îú‚îÄ‚îÄ Types/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MovieType.cs          # –¢–∏–ø Movie –¥–ª—è GraphQL
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MovieResponseType.cs  # –¢–∏–ø –æ—Ç–≤–µ—Ç–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
‚îÇ   ‚îî‚îÄ‚îÄ Middleware/
‚îÇ       ‚îî‚îÄ‚îÄ RequestLoggingMiddleware.cs  # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
```

---

## üìù –ö–æ–¥ Backend —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è GraphQL –≤ Program.cs

```csharp
// AbsoluteCinema.WebAPI/Program.cs

using HotChocolate.AspNetCore;
using AbsoluteCinema.WebAPI.GraphQL;

// ... –¥—Ä—É–≥–∏–µ using

var builder = WebApplication.CreateBuilder(args);

// –î–æ–±–∞–≤–ª—è–µ–º GraphQL —Å—Ö–µ–º—É –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
builder.Services.AddGraphQLSchema();

// ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

var app = builder.Build();

// ... middleware –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

// –ú–∞–ø–ø–∏–Ω–≥ GraphQL endpoint
// –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: /graphql
// –¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω GraphQL Playground –Ω–∞: /graphql/ui (–≤ development)
app.MapGraphQL();

app.Run();
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- `AddGraphQLSchema()` —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç GraphQL —Å–µ—Ä–≤–µ—Ä –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- `MapGraphQL()` —Å–æ–∑–¥–∞–µ—Ç endpoint `/graphql` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –í development —Ä–µ–∂–∏–º–µ —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω GraphQL Playground (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è IDE) –Ω–∞ `/graphql/ui`

---

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GraphQL Schema

```csharp
// AbsoluteCinema.WebAPI/GraphQL/GraphQLSchema.cs

using Microsoft.Extensions.DependencyInjection;
using AbsoluteCinema.WebAPI.GraphQL.Middleware;
using AbsoluteCinema.WebAPI.GraphQL.Queries;
using AbsoluteCinema.WebAPI.GraphQL.Types;

namespace AbsoluteCinema.WebAPI.GraphQL
{
    public static class GraphQLSchema
    {
        public static IServiceCollection AddGraphQLSchema(this IServiceCollection services)
        {
            services
                .AddGraphQLServer()                    // –°–æ–∑–¥–∞–µ–º GraphQL —Å–µ—Ä–≤–µ—Ä
                .AddQueryType<MovieQuery>()            // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Query —Ç–∏–ø (–∑–∞–ø—Ä–æ—Å—ã)
                .AddType<MovieType>()                  // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ç–∏–ø Movie
                .AddFiltering()                        // –í–∫–ª—é—á–∞–µ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é (where)
                .AddSorting()                          // –í–∫–ª—é—á–∞–µ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É (orderBy)
                .AddProjections()                       // –í–∫–ª—é—á–∞–µ–º –ø—Ä–æ–µ–∫—Ü–∏–∏ (select)
                .UseRequest<RequestLoggingMiddleware>(); // –î–æ–±–∞–≤–ª—è–µ–º middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

            return services;
        }
    }
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- `AddGraphQLServer()` ‚Äî —Å–æ–∑–¥–∞–µ—Ç GraphQL —Å–µ—Ä–≤–µ—Ä
- `AddQueryType<MovieQuery>()` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏
- `AddType<MovieType>()` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö
- `AddFiltering()` ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ
- `AddSorting()` ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- `AddProjections()` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î (–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è)
- `UseRequest<RequestLoggingMiddleware>()` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

### 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Query (–ó–∞–ø—Ä–æ—Å–æ–≤)

```csharp
// AbsoluteCinema.WebAPI/GraphQL/Queries/MovieQuery.cs

using AbsoluteCinema.Application.Contracts;
using HotChocolate.Types;
using Microsoft.Extensions.Logging;

namespace AbsoluteCinema.WebAPI.GraphQL.Queries
{
    public class MovieQuery
    {
        // –ó–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ–∏–ª—å–º–æ–≤
        [GraphQLName("movies")]  // –ò–º—è –≤ GraphQL —Å—Ö–µ–º–µ
        [GraphQLDescription("Gets all movies with included related data")]  // –û–ø–∏—Å–∞–Ω–∏–µ
        public async Task<IEnumerable<MovieDto>> GetMovies(
            [Service] IMovieService movieService,  // Dependency Injection
            [Service] ILogger<MovieQuery> logger)
        {
            try
            {
                // –í—ã–∑—ã–≤–∞–µ–º —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
                return await movieService.GetAllMoviesWithIncludeAsync();
            }
            catch (Exception ex)
            {
                logger.LogError(ex, "Error while getting movies");
                throw;
            }
        }

        // –ó–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞ –ø–æ ID
        [GraphQLName("movie")]  // –ò–º—è –≤ GraphQL —Å—Ö–µ–º–µ
        [GraphQLDescription("Gets a movie by its ID")]  // –û–ø–∏—Å–∞–Ω–∏–µ
        public async Task<MovieDto?> GetMovieById(
            [GraphQLName("id")] int id,  // –ü–∞—Ä–∞–º–µ—Ç—Ä –∑–∞–ø—Ä–æ—Å–∞
            [Service] IMovieService movieService,
            [Service] ILogger<MovieQuery> logger)
        {
            try
            {
                return await movieService.GetMovieByIdAsync(id);
            }
            catch (Exception ex)
            {
                logger.LogError(ex, $"Error while getting movie with ID {id}");
                throw;
            }
        }
    }
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- `MovieQuery` ‚Äî –∫–ª–∞—Å—Å, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤—Å–µ Query –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ö–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –∫–∞–∫ GraphQL –∑–∞–ø—Ä–æ—Å
- `[GraphQLName("movies")]` ‚Äî –∑–∞–¥–∞–µ—Ç –∏–º—è –≤ GraphQL —Å—Ö–µ–º–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—ã–ª–æ –±—ã `getMovies`)
- `[Service]` ‚Äî –∞—Ç—Ä–∏–±—É—Ç –¥–ª—è Dependency Injection (HotChocolate –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–Ω–µ–¥—Ä—è–µ—Ç —Å–µ—Ä–≤–∏—Å—ã)
- –ú–µ—Ç–æ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å async –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `Task<T>`

**–ü—Ä–∏–º–µ—Ä GraphQL –∑–∞–ø—Ä–æ—Å–∞:**
```graphql
query {
  movies {
    id
    title
    description
  }
}
```

**–ò–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º:**
```graphql
query {
  movie(id: 1) {
    id
    title
    score
  }
}
```

---

### 4. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ (Types)

```csharp
// AbsoluteCinema.WebAPI/GraphQL/Types/MovieType.cs

using AbsoluteCinema.Application.DTO.Entities;
using HotChocolate.Types;

namespace AbsoluteCinema.WebAPI.GraphQL.Types
{
    // –ù–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç ObjectType<T>, –≥–¥–µ T - —ç—Ç–æ DTO –∫–ª–∞—Å—Å
    public class MovieType : ObjectType<MovieDto>
    {
        protected override void Configure(IObjectTypeDescriptor<MovieDto> descriptor)
        {
            // –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∏–ø–∞
            descriptor.Description("Represents a movie in the cinema");
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è
            descriptor
                .Field(m => m.Id)
                .Description("The unique identifier of the movie");
                
            descriptor
                .Field(m => m.Title)
                .Description("The title of the movie");
                
            // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–ª—è (–≤ C# Discription, –≤ GraphQL description)
            descriptor
                .Field(m => m.Discription)
                .Name("description")  // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –¥–ª—è GraphQL
                .Description("The description of the movie");
                
            descriptor
                .Field(m => m.ReleaseDate)
                .Description("The release date of the movie");
                
            descriptor
                .Field(m => m.Score)
                .Description("The score/rating of the movie");

            descriptor
                .Field(m => m.Adult)
                .Description("Whether the movie is marked as adult");

            descriptor
                .Field(m => m.PosterPath)
                .Description("Poster path");

            descriptor
                .Field(m => m.Language)
                .Description("Movie language");

            descriptor
                .Field(m => m.TrailerPath)
                .Description("Trailer path");

            // –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (—Å–≤—è–∑–∏)
            descriptor
                .Field(m => m.MovieGenres)
                .Description("Genres linked to the movie");

            descriptor
                .Field(m => m.MovieActors)
                .Description("Actors linked to the movie");
        }
    }
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- `MovieType` –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `ObjectType<MovieDto>` ‚Äî —ç—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç HotChocolate, –∫–∞–∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å C# DTO –≤ GraphQL —Ç–∏–ø
- `Configure()` –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞–∂–¥–æ–µ –ø–æ–ª–µ:
  - –î–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
  - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ–ª–µ
  - –°–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—è
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∑–æ–ª–≤–µ—Ä—ã –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç–µ–º, –∫–∞–∫–∏–µ –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã –≤ GraphQL
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Discription` ‚Üí `description`)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ GraphQL Playground

---

### 5. Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```csharp
// AbsoluteCinema.WebAPI/GraphQL/Middleware/RequestLoggingMiddleware.cs

using System.Diagnostics;
using HotChocolate.Execution;
using Microsoft.Extensions.Logging;
using RequestDelegate = HotChocolate.Execution.RequestDelegate;

namespace AbsoluteCinema.WebAPI.GraphQL.Middleware
{
    public class RequestLoggingMiddleware
    {
        private readonly RequestDelegate _next;
        private readonly ILogger<RequestLoggingMiddleware> _logger;

        public RequestLoggingMiddleware(
            RequestDelegate next,
            ILogger<RequestLoggingMiddleware> logger)
        {
            _next = next ?? throw new ArgumentNullException(nameof(next));
            _logger = logger ?? throw new ArgumentNullException(nameof(logger));
        }

        public async ValueTask InvokeAsync(IRequestContext context)
        {
            var start = Stopwatch.GetTimestamp();
            try
            {
                // –í—ã–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π middleware –≤ —Ü–µ–ø–æ—á–∫–µ
                await _next(context);
            }
            finally
            {
                // –õ–æ–≥–∏—Ä—É–µ–º –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
                var elapsed = Stopwatch.GetElapsedTime(start);

                if (context.Operation is not null)
                {
                    _logger.LogInformation(
                        "GraphQL operation '{OperationName}' completed in {ElapsedMilliseconds}ms",
                        context.Operation.Name ?? "anonymous",
                        elapsed.TotalMilliseconds);
                }
            }
        }
    }
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- Middleware –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π GraphQL –∑–∞–ø—Ä–æ—Å
- –ó–∞–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä—É–µ—Ç –∏–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:**
```
GraphQL operation 'GetMovies' completed in 45.2ms
```

---

## üé® Frontend: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç GraphQL –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **Apollo Client** ‚Äî –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å GraphQL
- **@apollo/client** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç
- **graphql** ‚Äî –ø–∞—Ä—Å–µ—Ä GraphQL –∑–∞–ø—Ä–æ—Å–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:

```
AbsoluteCinema_Frontend/src/
‚îú‚îÄ‚îÄ apollo/
‚îÇ   ‚îú‚îÄ‚îÄ client.ts              # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apollo Client
‚îÇ   ‚îî‚îÄ‚îÄ ApolloProviderWrapper.tsx  # Provider –¥–ª—è React
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useGraphQLQuery.js     # –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
‚îî‚îÄ‚îÄ pages/
    ‚îî‚îÄ‚îÄ GraphQLMoviesPage.jsx  # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

---

## üìù –ö–æ–¥ Frontend —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apollo Client

```typescript
// AbsoluteCinema_Frontend/src/apollo/client.ts

import { ApolloClient, InMemoryCache, createHttpLink } from '@apollo/client';
import { setContext } from '@apollo/client/link/context';
import { APP_CONFIG } from '../env';

// 1. –°–æ–∑–¥–∞–µ–º HTTP —Å—Å—ã–ª–∫—É –Ω–∞ GraphQL endpoint
const httpLink = createHttpLink({
  uri: `${APP_CONFIG.HUB_URL}/graphql`, // URL GraphQL —Å–µ—Ä–≤–µ—Ä–∞
});

// 2. –°–æ–∑–¥–∞–µ–º middleware –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
const authLink = setContext((_, { headers }) => {
  // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ localStorage
  const token = localStorage.getItem('token');
  
  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å —Ç–æ–∫–µ–Ω–æ–º
  return {
    headers: {
      ...headers,
      authorization: token ? `Bearer ${token}` : "",
    }
  };
});

// 3. –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä Apollo Client
export const client = new ApolloClient({
  link: authLink.concat(httpLink),  // –¶–µ–ø–æ—á–∫–∞: —Å–Ω–∞—á–∞–ª–∞ auth, –ø–æ—Ç–æ–º http
  cache: new InMemoryCache(),        // –ö—ç—à –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
  defaultOptions: {
    watchQuery: {
      fetchPolicy: 'cache-first',    // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
      errorPolicy: 'all',            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –æ—à–∏–±–∫–∏
    },
    query: {
      fetchPolicy: 'network-only',   // –í—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å —Å–µ—Ä–≤–µ—Ä–∞
      errorPolicy: 'all',
    },
    mutate: {
      errorPolicy: 'all',
    },
  },
});
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- `httpLink` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å GraphQL –∑–∞–ø—Ä–æ—Å—ã
- `authLink` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- `authLink.concat(httpLink)` ‚Äî —Å–æ–∑–¥–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É: —Å–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–∫–µ–Ω, –ø–æ—Ç–æ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å
- `InMemoryCache` ‚Äî –∫—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- `fetchPolicy` ‚Äî –ø–æ–ª–∏—Ç–∏–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:
  - `cache-first` ‚Äî —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—ç—à, –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞
  - `network-only` ‚Äî –≤—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∫—ç—à
  - `cache-and-network` ‚Äî –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å

---

### 2. Apollo Provider –¥–ª—è React

```typescript
// AbsoluteCinema_Frontend/src/apollo/ApolloProviderWrapper.tsx

import { ApolloProvider } from '@apollo/client/react';
import { client } from './client';
import { ReactNode } from 'react';

type Props = {
  children: ReactNode;
};

export const ApolloProviderWrapper = ({ children }: Props) => {
  return <ApolloProvider client={client}>{children}</ApolloProvider>;
};
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- `ApolloProvider` ‚Äî React Context Provider, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç Apollo Client –¥–æ—Å—Ç—É–ø–Ω—ã–º –≤–æ –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –û–±–µ—Ä–Ω—É–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ `ApolloProviderWrapper`, –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GraphQL —Ö—É–∫–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ main.jsx:**
```jsx
// AbsoluteCinema_Frontend/src/main.jsx

import { ApolloProviderWrapper } from './apollo/ApolloProviderWrapper';

createRoot(document.getElementById('root')).render(
    <ApolloProviderWrapper>
        <MovieProvider>
            <RouteHandler />
        </MovieProvider>
    </ApolloProviderWrapper>
)
```

---

### 3. –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

```javascript
// AbsoluteCinema_Frontend/src/hooks/useGraphQLQuery.js

import { useQuery } from '@apollo/client/react';

export const useGraphQLQuery = (query, options = {}) => {
  const { data, loading, error, refetch } = useQuery(query, {
    ...options,
    fetchPolicy: options.fetchPolicy || 'cache-and-network',
  });

  return { data, loading, error, refetch };
};
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º `useQuery` –∏–∑ Apollo Client
- –£–ø—Ä–æ—â–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –Ω–µ –Ω—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ —É–∫–∞–∑—ã–≤–∞—Ç—å `fetchPolicy`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
  - `data` ‚Äî –¥–∞–Ω–Ω—ã–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
  - `loading` ‚Äî —Ñ–ª–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏
  - `error` ‚Äî –æ—à–∏–±–∫–∞, –µ—Å–ª–∏ –µ—Å—Ç—å
  - `refetch` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

---

### 4. –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

```jsx
// AbsoluteCinema_Frontend/src/pages/GraphQLMoviesPage.jsx

import React from 'react';
import { gql } from '@apollo/client';
import { useGraphQLQuery } from '../hooks/useGraphQLQuery';

// 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º GraphQL –∑–∞–ø—Ä–æ—Å
const GET_MOVIES = gql`
  query GetMovies {
    movies {
      id
      title
      description
      releaseDate
      score
      adult
      posterPath
      language
      trailerPath
    }
  }
`;

const GraphQLMoviesPage = () => {
  // 2. –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ö—É–∫ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
  const { data, loading, error } = useGraphQLQuery(GET_MOVIES);

  // 3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–∫–∏
  if (loading) return <div className="text-center my-5">Loading movies...</div>;
  if (error) return <div className="alert alert-danger">Error loading movies: {error.message}</div>;

  // 4. –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ
  const movies = data?.movies || [];

  // 5. –†–µ–Ω–¥–µ—Ä–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  return (
    <div className="container mt-4">
      <h2 className="mb-4">Movies (GraphQL)</h2>
      
      {movies.length === 0 ? (
        <div className="alert alert-info">No movies found.</div>
      ) : (
        <div className="row">
          {movies.map((movie) => (
            <div key={movie.id} className="col-md-4 mb-4">
              <div className="card h-100">
                <div className="card-body">
                  <h5 className="card-title">{movie.title}</h5>
                  <h6 className="card-subtitle mb-2 text-muted">
                    {movie.releaseDate ? new Date(movie.releaseDate).getFullYear() : 'N/A'} ‚Ä¢ 
                    Score: {movie.score || 'N/A'}
                  </h6>
                  <p className="card-text">
                    {movie.description?.length > 150 
                      ? `${movie.description.substring(0, 150)}...` 
                      : movie.description}
                  </p>
                </div>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
};

export default GraphQLMoviesPage;
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞** ‚Äî `gql` –ø–∞—Ä—Å–∏—Ç GraphQL —Å—Ç—Ä–æ–∫—É –≤ –æ–±—ä–µ–∫—Ç –∑–∞–ø—Ä–æ—Å–∞
2. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞** ‚Äî `useGraphQLQuery` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
3. **–°–æ—Å—Ç–æ—è–Ω–∏—è**:
   - `loading === true` ‚Äî –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
   - `error !== undefined` ‚Äî –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞
   - `data` ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
4. **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è

---

## üîÑ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–∞

### –ü—Ä–∏–º–µ—Ä: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤

**1. Frontend —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**
```graphql
query GetMovies {
  movies {
    id
    title
    description
  }
}
```

**2. Apollo Client –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP POST –∑–∞–ø—Ä–æ—Å:**
```
POST /graphql
Content-Type: application/json
Authorization: Bearer <token>

{
  "query": "query GetMovies { movies { id title description } }"
}
```

**3. HotChocolate –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**
- –ü–∞—Ä—Å–∏—Ç GraphQL –∑–∞–ø—Ä–æ—Å
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `movies` query
- –ù–∞—Ö–æ–¥–∏—Ç –º–µ—Ç–æ–¥ `GetMovies()` –≤ –∫–ª–∞—Å—Å–µ `MovieQuery`

**4. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è resolver:**
```csharp
public async Task<IEnumerable<MovieDto>> GetMovies(...)
{
    return await movieService.GetAllMoviesWithIncludeAsync();
}
```

**5. –°–µ—Ä–≤–∏—Å –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î:**
- Entity Framework –≤—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∑–∞–ø—Ä–æ—Å
- –î–∞–Ω–Ω—ã–µ –º–∞–ø–ø—è—Ç—Å—è –≤ `MovieDto`

**6. HotChocolate —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ–ª—è:**
- –ö–ª–∏–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–∏–ª —Ç–æ–ª—å–∫–æ `id`, `title`, `description`
- HotChocolate –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —ç—Ç–∏ –ø–æ–ª—è (–±–ª–∞–≥–æ–¥–∞—Ä—è –ø—Ä–æ–µ–∫—Ü–∏—è–º)

**7. –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É:**
```json
{
  "data": {
    "movies": [
      {
        "id": 1,
        "title": "Inception",
        "description": "A mind-bending thriller..."
      },
      {
        "id": 2,
        "title": "The Matrix",
        "description": "A computer hacker learns..."
      }
    ]
  }
}
```

**8. Apollo Client:**
- –ö—ç—à–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ `InMemoryCache`
- –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è

---

## üéì –û—Å–Ω–æ–≤—ã GraphQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

### Query (–ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö)

**–ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å:**
```graphql
query {
  movies {
    id
    title
  }
}
```

**–ó–∞–ø—Ä–æ—Å —Å –∏–º–µ–Ω–µ–º:**
```graphql
query GetMovies {
  movies {
    id
    title
  }
}
```

**–ó–∞–ø—Ä–æ—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
```graphql
query GetMovie {
  movie(id: 1) {
    id
    title
    description
  }
}
```

**–ó–∞–ø—Ä–æ—Å —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:**
```graphql
query GetMovie($movieId: Int!) {
  movie(id: $movieId) {
    id
    title
  }
}
```

**–í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:**
```graphql
query {
  movies {
    id
    title
    movieGenres {
      id
      name
    }
    movieActors {
      id
      name
    }
  }
}
```

**–ê–ª–∏–∞—Å—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –æ–¥–Ω–æ –ø–æ–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑):**
```graphql
query {
  firstMovie: movie(id: 1) {
    title
  }
  secondMovie: movie(id: 2) {
    title
  }
}
```

**–§—Ä–∞–≥–º–µ–Ω—Ç—ã (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —á–∞—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞):**
```graphql
fragment MovieInfo on Movie {
  id
  title
  description
  score
}

query {
  movies {
    ...MovieInfo
    releaseDate
  }
}
```

---

### Mutation (–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)

**–ü—Ä–∏–º–µ—Ä –º—É—Ç–∞—Ü–∏–∏ (–µ—Å–ª–∏ –±—ã –æ–Ω–∞ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞):**
```graphql
mutation CreateMovie($input: CreateMovieInput!) {
  createMovie(input: $input) {
    id
    title
  }
}
```

**–ù–∞ –±–µ–∫–µ–Ω–¥–µ —ç—Ç–æ –≤—ã–≥–ª—è–¥–µ–ª–æ –±—ã —Ç–∞–∫:**
```csharp
public class MovieMutation
{
    public async Task<MovieDto> CreateMovie(
        CreateMovieInput input,
        [Service] IMovieService movieService)
    {
        return await movieService.CreateMovieAsync(input);
    }
}
```

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ HotChocolate

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (AddFiltering)

```graphql
query {
  movies(where: { score: { gt: 7 } }) {
    id
    title
    score
  }
}
```

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (AddSorting)

```graphql
query {
  movies(order: { score: DESC }) {
    id
    title
    score
  }
}
```

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è

```graphql
query {
  movies(first: 10, skip: 20) {
    id
    title
  }
}
```

---

## üîç GraphQL Playground

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ development —Ä–µ–∂–∏–º–µ, –¥–æ—Å—Ç—É–ø–µ–Ω GraphQL Playground:

**URL:** `http://localhost:5299/graphql/ui`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/graphql/ui` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:
```graphql
query {
  movies {
    id
    title
    score
  }
}
```
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Play"
4. –£–≤–∏–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ REST vs GraphQL

### REST API:
```javascript
// –ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å 3 –∑–∞–ø—Ä–æ—Å–∞
const movies = await fetch('/api/movies');
const movie = await fetch('/api/movies/1');
const actors = await fetch('/api/movies/1/actors');
```

### GraphQL:
```graphql
# –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–∞–µ—Ç –≤—Å—ë
query {
  movies {
    id
    title
  }
  movie(id: 1) {
    id
    title
    movieActors {
      id
      name
    }
  }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ GraphQL:**
- ‚úÖ –ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É
- ‚úÖ –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—à—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
- ‚úÖ –°–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ IDE

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ GraphQL:**
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ HTTP
- ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–µ–µ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –±–µ–∫–µ–Ω–¥–µ

---

## üéØ –†–µ–∑—é–º–µ

### Backend (C# .NET):
1. **GraphQLSchema.cs** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç GraphQL —Å–µ—Ä–≤–µ—Ä
2. **MovieQuery.cs** ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã (Query)
3. **MovieType.cs** ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
4. **RequestLoggingMiddleware.cs** ‚Äî –ª–æ–≥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
5. **Program.cs** ‚Äî –ø–æ–¥–∫–ª—é—á–∞–µ—Ç GraphQL –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

### Frontend (React):
1. **client.ts** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Apollo Client
2. **ApolloProviderWrapper.tsx** ‚Äî –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. **useGraphQLQuery.js** ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
4. **GraphQLMoviesPage.jsx** ‚Äî –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:
- **Query** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **Type** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- **Resolver** ‚Äî –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- **Schema** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [GraphQL Official Docs](https://graphql.org/learn/)
- [HotChocolate Docs](https://chillicream.com/docs/hotchocolate)
- [Apollo Client Docs](https://www.apollographql.com/docs/react/)

---

**–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ AbsoluteCinema** üé¨

